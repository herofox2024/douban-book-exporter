# 豆瓣书评爬虫工具

## 📁 项目结构

重构后的项目采用了清晰的模块化目录结构：

```
豆瓣书评爬虫项目/
├── main.py                      # 主程序入口
├── requirements.txt             # 项目依赖
├── build.bat                    # 自动打包脚本
├── 豆瓣书评爬虫.spec             # PyInstaller配置
├── 使用指南.md                   # 详细使用指南
├── README.md                    # 项目说明文档
├── src/                         # 源代码目录
│   ├── crawler/                 # 爬虫模块
│   │   └── crawler.py           # 爬虫核心逻辑
│   ├── database/                # 数据库模块
│   │   └── database.py          # 数据库操作
│   ├── exporter/                 # 导出模块
│   │   ├── html_exporter.py     # HTML报告导出
│   │   └── csv_exporter.py      # CSV格式导出
│   ├── gui/                     # GUI模块
│   │   └── gui.py               # GUI界面实现
│   └── utils/                   # 工具模块
│       └── logger.py            # 日志管理
├── tests/                       # 测试目录
│   └── test_all.py              # 功能测试脚本
└── logs/                        # 日志目录
    └── douban_crawler_*.log     # 日志文件
```

## 🚀 快速开始

### 方式1: 直接运行exe文件（推荐）
```bash
# 自行打包后，可执行文件位置：
cd dist/
# 双击 豆瓣书评爬虫.exe
```

### 方式2: Python源码运行
```bash
# 安装依赖
pip install -r requirements.txt

# GUI模式
python main.py

# 命令行模式
python main.py --cli

# 查看帮助
python main.py --help
```

### 方式3: 自行打包
```bash
# 运行自动打包脚本
build.bat

# 或手动打包
pyinstaller --clean 豆瓣书评爬虫.spec
```

## 🔍 项目分析

### 🎯 核心价值

豆瓣书评爬虫工具是一个功能全面的豆瓣读书数据管理解决方案，旨在帮助用户轻松爬取、管理和分析自己的豆瓣读书数据。项目提供了从数据爬取到可视化分析的完整流程，支持多格式导出和智能推荐，为用户提供了一站式的读书数据管理体验。

### 🏗️ 架构设计

项目采用了模块化的分层架构，具有良好的扩展性和可维护性：

1. **表示层** - 提供GUI和命令行两种交互方式，满足不同用户需求
2. **业务逻辑层** - 处理核心业务流程，包括爬取控制、数据管理和导出逻辑
3. **数据访问层** - 封装数据库操作，支持SQLite持久化存储
4. **工具层** - 提供日志管理、配置管理等通用功能

### 💡 技术亮点

1. **智能爬取策略** - 结合日期范围过滤、增量更新和并行爬取，优化爬取效率
2. **多格式导出** - 支持HTML和CSV两种格式，满足不同场景需求
3. **数据分析能力** - 自动生成年度统计、阅读偏好和智能推荐
4. **友好的用户界面** - 提供直观的GUI操作和实时进度反馈
5. **完善的异常处理** - 具备健壮的错误处理机制，提高系统稳定性
6. **可扩展的架构** - 模块化设计，便于功能扩展和二次开发
7. **自动化打包支持** - 提供一键打包脚本，方便生成可执行文件

## ✨ 核心功能

1. **数据爬取** - 爬取豆瓣用户的读书收藏和书评，支持按日期范围过滤
2. **数据存储** - SQLite数据库持久化存储，支持事务管理和索引优化
3. **GUI界面** - 友好的图形用户界面，支持实时进度显示和状态更新
4. **多格式导出** - 支持HTML和CSV两种格式导出
5. **命令行支持** - 支持自动化脚本调用，提供丰富的命令行参数
6. **增量更新** - 只获取新添加的书籍信息，避免重复爬取
7. **增强的反爬虫策略** - 支持随机User-Agent、请求头池、智能延迟和自动重试
8. **并行爬取** - 支持并行处理书籍信息，提高爬取效率
9. **完善的日志系统** - 支持控制台和文件输出，按天滚动，便于问题排查
10. **优化的错误处理** - 完善的错误处理和容错机制，提高系统稳定性
11. **智能日期过滤** - 支持按年度范围自动停止爬取，优化爬取效率
12. **年度统计分析** - 生成年度读书报告，包含阅读趋势和统计信息
13. **阅读偏好分析** - 自动生成最喜欢的作者和书籍类型
14. **TOP10推荐榜单** - 根据阅读习惯智能推荐书籍
15. **动态进度条** - 导出过程显示动态进度，提升用户体验
16. **下拉框日期选择** - 友好的日期选择界面，避免手动输入错误

## 🛠️ 技术栈

- **Python 3.8+** - 主要开发语言
- **Tkinter** - GUI界面框架
- **SQLite** - 数据库存储
- **Requests** - HTTP请求库
- **BeautifulSoup4** - HTML解析
- **Pandas** - 数据处理
- **PyInstaller** - 程序打包
- **Loguru** - 日志管理
- **APScheduler** - 定时任务支持
- **Matplotlib** - 数据可视化
- **fake-useragent** - 随机User-Agent
- **aiohttp** - 异步HTTP请求
- **aiosqlite** - 异步SQLite
- **openpyxl** - Excel文件支持
- **lxml** - XML解析器
- **tqdm** - 进度条显示

## 📋 使用说明

### Cookie获取
1. 浏览器登录豆瓣网站
2. 访问你的收藏页面
3. F12开发者工具 → Network标签页
4. 刷新页面 → 找到页面请求 → 复制Cookie

### 数据导出
- **HTML格式** - 交互式网页报告，支持搜索筛选、年度统计和推荐榜单
- **CSV格式** - 纯文本格式，便于数据分析和导入其他系统

## ⚠️ 注意事项

1. **合规使用** - 仅用于个人数据备份，请遵守豆瓣服务条款
2. **频率控制** - 合理设置爬取间隔，避免对服务器造成压力
3. **Cookie管理** - 定期更新Cookie，注意隐私保护
4. **数据备份** - 重要数据请及时备份

## 📞 联系方式

如有问题或建议，请查看使用指南或联系开发者。

## 📄 许可证

本项目仅供学习交流使用，请勿用于商业用途。

---

**开始您的豆瓣书评数据管理之旅！** 📚✨